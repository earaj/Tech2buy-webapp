<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Application événements</title>
  <link href='https://fonts.googleapis.com/css?family=Barlow Semi Condensed' rel='stylesheet'>
  <link rel="stylesheet" href="/css/bootstrap.min.css" />
  <link rel="stylesheet" href="commun.css" />
  <script src="/js/bootstrap.min.js"></script>
</head>
<%- include ("../partials/header.ejs") %>
<style>
  body {
    background: #F0F8FF;
  }
</style>

<body>
  <a href="./panier">
    <button id="pageindex" type="button" class="btn link-secondary">&#8592;</button> <label for="pageindex">Annuler la transaction</label>
  </a>

  <div class="container">
    <form method="POST" action="/paiement">
      <div class="py-5 text-center">
        <h2>La caisse</h2>
      </div>

      <div class="row">
        <div class="col-md-4 order-md-2 mb-4">
          <h4 class="d-flex justify-content-between align-items-center mb-3">
            <span class="text-muted">Votre panier</span>
            <span class="badge badge-secondary badge-pill"><%= panier.length %></span>
          </h4>
          <div class="bg-light p-3">
            <h2 class="display-4 text-center" style="font-weight: bold;">Résumé de la commande</h2>
            <% let prix_total = 0; %>
            <% if (panier && panier.length) { %>
              <% panier.forEach(function(produit) { %>
                <div class="row mt-3">
                  <div class="col-12">
                    <h4><%= produit.nom_produit %></h4>
                    <% if (produit.quantite > 1) { %>
                      <p>(x <%= produit.quantite %>)</p>
                    <% } %>
                    <p><%= produit.prix_unitaire %>$</p>
                  </div>
                  <% prix_total += produit.prix_unitaire * produit.quantite; %>
                </div>
              <% }) %>
            <% } else { %>
              <h3>On dirait que c'est vide !</h3>
            <% } %>
            <% if (panier && panier.length) { %>
              <h4>Prix total: <%= prix_total.toFixed(2) %>$</h4>
            <% } %>
          </div>
        </div>
        <div class="col-md-8 order-md-1">
          <h4 class="mb-3">Adresse de facturation</h4>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="prenom">Prénom</label>
              <input type="text" class="form-control" id="prenom" placeholder="Entrez votre prénom" value="<%= utilisateurs.prenom %>" required>
              <div class="invalid-feedback">Le prénom est requis.</div>
            </div>
            <div class="col-md-6 mb-3">
              <label for="nom">Nom</label>
              <input type="text" class="form-control" id="nom" placeholder="Entrez votre nom" value="<%= utilisateurs.nom %>" required>
              <div class="invalid-feedback">Le nom est requis.</div>
            </div>
          </div>
          <div class="mb-3">
            <label for="nom_utilisateur">Nom Utilisateur</label>
            <input type="text" class="form-control" id="nom_utilisateur" placeholder="Entrez votre nom d'utilisateur" value="<%= utilisateurs.nom_utilisateur %>" required>
            <div class="invalid-feedback">Votre nom d'utilisateur est requis.</div>
          </div>
          <div class="mb-3">
            <label for="adresse_courriel">Courriel</label>
            <input type="email" class="form-control" id="adresse_courriel" placeholder="Entrez votre adresse courriel" value="<%= utilisateurs.adresse_courriel %>" required>
            <div class="invalid-feedback">Veuillez entrer une adresse courriel valide.</div>
          </div>
          <div class="mb-3">
            <label for="address">Adresse</label>
            <input type="text" class="form-control" id="address" placeholder="Entrez votre adresse" required>
            <div class="invalid-feedback">L'adresse est requise.</div>
          </div>
          <div class="mb-3">
            <label for="address2">Adresse 2</label>
            <input type="text" class="form-control" id="address2" placeholder="Apartment ou suite">
          </div>
          <div class="row">
            <div class="col-md-5 mb-3">
              <label for="Pays">Pays</label>
              <select class="custom-select d-block w-100" id="Pays" required>
                <option value="">Choose...</option>
                <option>Canada</option>
              </select>
              <div class="invalid-feedback">Veuillez sélectionner un pays valide.</div>
            </div>
            <div class="col-md-4 mb-3">
              <label for="province">Province</label>
              <select class="custom-select d-block w-100" id="province" required>
                <option value="">Choisir...</option>
                <option>Quebec</option>
              </select>
              <div class="invalid-feedback">Veuillez fournir une province valide.</div>
            </div>
            <div class="col-md-3 mb-3">
              <label for="zip">Zip</label>
              <input type="text" class="form-control" id="zip" placeholder="" required>
              <div class="invalid-feedback">Le code ZIP est requis.</div>
            </div>
          </div>
          <h4 class="mb-3">Paiement</h4>
          <div class="d-block my-3">
            <div class="custom-control custom-radio">
              <input id="credit" name="paymentMethod" type="radio" class="custom-control-input" checked required>
              <label class="custom-control-label" for="credit">Carte de crédit</label>
            </div>
            <div class="custom-control custom-radio">
              <input id="paypal" name="paymentMethod" type="radio" class="custom-control-input" required>
              <label class="custom-control-label" for="paypal">Paypal</label>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="cc-name">Nom sur la carte</label>
              <input type="text" class="form-control" id="cc-name" placeholder="" required>
              <small class="text-muted">Nom complet comme affiché sur la carte</small>
              <div class="invalid-feedback">Le nom sur la carte est requis.</div>
            </div>
            <div class="col-md-6 mb-3">
              <label for="cc-number">Numéro de Carte de Crédit</label>
              <input type="text" class="form-control" id="cc-number" placeholder="" required>
              <div class="invalid-feedback">Le numéro de carte de crédit est requis.</div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-3 mb-3">
              <label for="cc-expiration">Expiration</label>
              <input type="text" class="form-control" id="cc-expiration" placeholder="" required>
              <div class="invalid-feedback">La date d'expiration est requise.</div>
            </div>
            <div class="col-md-3 mb-3">
              <label for="cc-cvv">CVV</label>
              <input type="text" class="form-control" id="cc-cvv" placeholder="" required>
              <div class="invalid-feedback">Le code de sécurité est requis.</div>
            </div>
          </div>
          <hr class="mb-4">
          <button class="btn btn-primary btn-lg btn-block" type="submit">Continuer à vérifier</button>
        </div>
      </div>
    </form>
    <footer class="my-5 pt-5 text-muted text-center text-small">
      <p class="mb-1">&copy; 2023-2024 Tech2Buy</p>
    </footer>
  </div>
</body>
